<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta name="generator" content="Hugo 0.80.0" />
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="FAQ #  Can I use the packit service as soon as I install it into my repository? #  Thanks for your interest in Packit Service! In order to start using the service, your repository or namespace needs to be allowed, which is an action to be done by us. Once we put you on the allowlist, we&rsquo;ll get in touch with you. We are now on-boarding Fedora contributors (with a Fedora Account System account).">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="FAQ" />
<meta property="og:description" content="FAQ #  Can I use the packit service as soon as I install it into my repository? #  Thanks for your interest in Packit Service! In order to start using the service, your repository or namespace needs to be allowed, which is an action to be done by us. Once we put you on the allowlist, we&rsquo;ll get in touch with you. We are now on-boarding Fedora contributors (with a Fedora Account System account)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://packit.dev/docs/faq/" />
<meta property="article:published_time" content="2019-07-24T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-07-24T00:00:00+00:00" />
<title>FAQ | Packit</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.81007768dfa1141e1fa60a2832f2c035182f8b9a5e48824ebdadd71412b4b994.css" integrity="sha256-gQB3aN&#43;hFB4fpgooMvLANRgvi5peSIJOva3XFBK0uZQ=">
<script defer src="/en.search.min.6a8f6066795edc78153a1d6d5b9aa19fa5a8b9e7b2367f8c2a230fbcb76fe60d.js" integrity="sha256-ao9gZnle3HgVOh1tW5qhn6WoueeyNn&#43;MKiMPvLdv5g0="></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-143669536-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a href="/"><img src="/packit_logo.png" alt="Logo" /><span>Packit</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>






  
<ul>
  
  <li>
    <a href="https://dashboard.packit.dev" target="_blank" rel="noopener">
        Dashboard
      </a>
  </li>
  
</ul>







  

  



  
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-2f67fdc9a362fd86f1cfd4450ed56551" class="toggle" checked />
    <label for="section-2f67fdc9a362fd86f1cfd4450ed56551" class="flex justify-between">
      <a href="https://packit.dev/docs/" class="">User Documentation</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/about/" class="">About Packit</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/guide/" class="">Onboarding Guide</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/packit-service/" class="">Packit Service</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/testing-farm/" class="">Testing Farm</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/faq/" class=" active">FAQ</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-10445724bd3552c84cfb0cd453c3c966" class="toggle"  />
    <label for="section-10445724bd3552c84cfb0cd453c3c966" class="flex justify-between">
      <a href="https://packit.dev/docs/source-git/" class="">Source-git</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/source-git/how-to-source-git/" class="">Create source-git repo</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d03e38b2eb78ad309a49a457d3e5e3cb" class="toggle"  />
    <label for="section-d03e38b2eb78ad309a49a457d3e5e3cb" class="flex justify-between">
      <a href="https://packit.dev/docs/source-git/work-with-source-git/" class="">Working with source-git</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/source-git/work-with-source-git/update-spec/" class="">Update a spec file</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/source-git/work-with-source-git/pull-upstream-fixes/" class="">Pull fixes from the upstream</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/source-git/work-with-source-git/build-locally/" class="">Build current checkout locally</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/source-git/work-with-source-git/propose-to-dist-git/" class="">Propose your source-git content to dist-git</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/source-git/design/" class="">Source-git design</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/configuration/" class="">Configuration</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-17ea62a3fa80e270b55a640146bc89e1" class="toggle"  />
    <label for="section-17ea62a3fa80e270b55a640146bc89e1" class="flex justify-between">
      <a href="https://packit.dev/docs/cli/" class="">Packit CLI</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/cli/build/" class="">build</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/cli/init/" class="">init</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/cli/create-bodhi-update/" class="">create-bodhi-update</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/cli/propose-downstream/" class="">propose-downstream</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/cli/srpm/" class="">srpm</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/cli/sync-from-downstream/" class="">sync-from-downstream</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/cli/status/" class="">status</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/cli/push-updates/" class="">push-updates</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/cli/local-build/" class="">local-build</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/cli/validate-config/" class="">validate-config</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/cli/copr-build/" class="">copr-build</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-a024048a4317a88a547d3a91b2359da1" class="toggle"  />
    <label for="section-a024048a4317a88a547d3a91b2359da1" class="flex justify-between">
      <a  class="">source-git</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/cli/source-git/init/" class="">init</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/cli/source-git/update-dist-git/" class="">update-dist-git</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/actions/" class="">Actions</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/docs/archive-not-matching-git/" class="">Generated code in upstream archives</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-a07783f405300745807d39eacf150420" class="toggle"  />
    <label for="section-a07783f405300745807d39eacf150420" class="flex justify-between">
      <a href="https://packit.dev/posts/" class="">Blog Posts</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/posts/july-2021/" class="">July 2021</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/posts/june-2021/" class="">June 2021</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/posts/may-2021/" class="">May 2021</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/posts/april-2021/" class="">April 2021</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/posts/march-2021/" class="">March 2021</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/posts/february-2021/" class="">February 2021</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/posts/january-2021/" class="">January 2021</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/posts/december-2020/" class="">December 2020</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/posts/november-2020/" class="">November 2020</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/posts/october-2020/" class="">October 2020</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/posts/fedora-eln/" class="">Working on the next major RHEL release, in your upstream repo</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/posts/september-2020/" class="">September 2020</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/posts/august-2020/" class="">August 2020</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/posts/july-2020/" class="">July 2020</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/posts/june-2020/" class="">June 2020</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/posts/may-2020/" class="">May 2020</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/posts/april-2020/" class="">April 2020</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/posts/march-2020/" class="">March 2020</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/posts/february-2020/" class="">February 2020</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/posts/january-20/" class="">January 2020</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/posts/2019/" class="">2019</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-03ded75136420a051aef84f84237f006" class="toggle"  />
    <label for="section-03ded75136420a051aef84f84237f006" class="flex justify-between">
      <a href="https://packit.dev/development-docs/" class="">Development Documentation</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/development-docs/creating-stream-9-repos/" class="">Creating CentOS Stream 9 source-git repositories</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://packit.dev/development-docs/patch-metadata/" class="">Source-git patch metadata</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>











  
<ul>
  
  <li>
    <a href="https://status.packit.dev" target="_blank" rel="noopener">
        Status page
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>FAQ</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#can-i-use-the-packit-service-as-soon-as-i-install-it-into-my-repository">Can I use the packit service as soon as I install it into my repository?</a></li>
    <li><a href="#can-i-use-packit-service-for-any-github-repository">Can I use packit service for any GitHub repository?</a></li>
    <li><a href="#how-can-i-contact-you">How can I contact you?</a></li>
    <li><a href="#why-do-i-have-to-maintain-packityaml-and-a-spec-file-upstream">Why do I have to maintain .packit.yaml and a spec file upstream?</a></li>
    <li><a href="#but-what-are-the-benefits">But what are the benefits?</a></li>
    <li><a href="#why-fedora">Why Fedora?</a></li>
    <li><a href="#how-is-packit-different-from-other-services">How is Packit different from other services?</a></li>
    <li><a href="#can-we-use-packit-with-gitlab">Can we use Packit with Gitlab?</a></li>
    <li><a href="#how-can-i-download-rpm-spec-file-if-it-is-not-part-of-upstream-repository">How can I download RPM spec file if it is not part of upstream repository?</a></li>
    <li><a href="#i-have-a-template-of-a-spec-file-in-my-repo-can-packit-work-with-it">I have a template of a spec file in my repo: can packit work with it?</a></li>
    <li><a href="#can-i-use-centos-stream-with-packit-service">Can I use CentOS Stream with packit service?</a></li>
    <li><a href="#after-adding-tests-i-see-error-no-fmf-metadata-found">After adding tests I see error &lsquo;No FMF metadata found.&rsquo;</a></li>
    <li><a href="#does-packit-work-with-rpmautospechttpsdocspagureorgfedora-infrarpmautospec">Does packit work with <a href="https://docs.pagure.org/Fedora-Infra.rpmautospec/">rpmautospec</a>?</a></li>
    <li><a href="#how-do-i-install-dependencies-for-my-commands-in-packit-service">How do I install dependencies for my commands in packit-service?</a></li>
    <li><a href="#a-command-failed-in-packit-service-how-do-i-reproduce-it-locally">A command failed in packit-service: how do I reproduce it locally?</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="faq">
  FAQ
  <a class="anchor" href="#faq">#</a>
</h1>
<h2 id="can-i-use-the-packit-service-as-soon-as-i-install-it-into-my-repository">
  Can I use the packit service as soon as I install it into my repository?
  <a class="anchor" href="#can-i-use-the-packit-service-as-soon-as-i-install-it-into-my-repository">#</a>
</h2>
<p>Thanks for your interest in Packit Service! In order to start using the
service, your repository or namespace needs to be allowed,
which is an action to be done by us.
Once we put you on the allowlist, we&rsquo;ll get in touch with you. We are now
on-boarding Fedora contributors (with a Fedora Account System account).</p>
<h2 id="can-i-use-packit-service-for-any-github-repository">
  Can I use packit service for any GitHub repository?
  <a class="anchor" href="#can-i-use-packit-service-for-any-github-repository">#</a>
</h2>
<p>Since Packit Service builds your PRs in Fedora COPR build service, by using
Packit-as-a-service, your software needs to comply with <a href="https://docs.pagure.org/copr.copr/user_documentation.html#what-i-can-build-in-copr">COPR
rules</a>.
If any of these points are violated, we&rsquo;ll remove the builds and may put you on
a blocklist so you won&rsquo;t be able to use the service again.</p>
<h2 id="how-can-i-contact-you">
  How can I contact you?
  <a class="anchor" href="#how-can-i-contact-you">#</a>
</h2>
<p>If you encounter a problem while using packit or Packit Service, please open an
<a href="https://github.com/packit/packit-service/issues/new">upstream issue</a>.
In case of any other questions, feel free to contact
<a href="https://github.com/orgs/packit/teams/the-packit-team">us</a>:</p>
<ul>
<li><strong>#packit</strong> on <a href="https://libera.chat/">Libera.Chat</a></li>
<li><strong><a href="mailto:user-cont-team@redhat.com">user-cont-team@redhat.com</a></strong></li>
</ul>
<h2 id="why-do-i-have-to-maintain-packityaml-and-a-spec-file-upstream">
  Why do I have to maintain .packit.yaml and a spec file upstream?
  <a class="anchor" href="#why-do-i-have-to-maintain-packityaml-and-a-spec-file-upstream">#</a>
</h2>
<p><a href="https://github.com/packit/packit/issues/574">We are working</a> on simplifying the <code>.packit.yaml</code> so it&rsquo;s as small as possible.
We will also handle all potentially backward incompatible changes of <code>.packit.yaml</code>.
<code>Spec</code> file can be downloaded (see specific question below) from <a href="https://src.fedoraproject.org">Fedora Pagure</a> instead of having it included in the upstream repository.</p>
<h2 id="but-what-are-the-benefits">
  But what are the benefits?
  <a class="anchor" href="#but-what-are-the-benefits">#</a>
</h2>
<p>Packit makes it trivial to run your project as part of an OS.
It provides feedback to your project at the time when the changes are being developed
so you can fix incompatible code when you are working on it, not when it&rsquo;s already released.
When you push commits to a pull request, you&rsquo;ll get RPM build and test results right away.</p>
<h2 id="why-fedora">
  Why Fedora?
  <a class="anchor" href="#why-fedora">#</a>
</h2>
<p>We&rsquo;ve started with Fedora Linux because we work for Red Hat and we ❤ Fedora.</p>
<h2 id="how-is-packit-different-from-other-services">
  How is Packit different from other services?
  <a class="anchor" href="#how-is-packit-different-from-other-services">#</a>
</h2>
<p>Packit connects the existing services (<a href="https://copr.fedorainfracloud.org">Copr</a>,
<a href="https://src.fedoraproject.org">Pagure</a>, <a href="https://koji.fedoraproject.org">Koji</a>,
<a href="https://bodhi.fedoraproject.org">Bodhi</a>) together.</p>
<h2 id="can-we-use-packit-with-gitlab">
  Can we use Packit with Gitlab?
  <a class="anchor" href="#can-we-use-packit-with-gitlab">#</a>
</h2>
<p>Yes!</p>
<p>GitLab doesn&rsquo;t have an app functionality and we don&rsquo;t use the
<a href="https://docs.gitlab.com/ee/user/project/integrations/overview.html">Integrations</a>
as it doesn&rsquo;t solve authentication.
To enable Packit, you need to manually configure a webhook.</p>
<p>Go to <code>Settings</code> -&gt; <code>Webhooks</code> and add <a href="https://prod.packit.dev/api/webhooks/gitlab">https://prod.packit.dev/api/webhooks/gitlab</a> or
<a href="https://stg.packit.dev/api/webhooks/gitlab">https://stg.packit.dev/api/webhooks/gitlab</a> as <code>URL</code>.
Select <code>Push events</code>, <code>Comments</code>, <code>Issues events</code> and <code>Merge request events</code> as <code>Triggers</code>.
Do not provide <code>Secret token</code> yet and click <code>Add webhook</code>.
You should see the created hook at the bottom of the page now.
Select <code>Test</code> and for example <code>Merge requests events</code>.
At the top of the page appears a red
<code>Hook executed successfully but returned HTTP 401 &quot;X-Gitlab-Token not in request.headers&quot;</code>.
Wait a bit and check <code>Issues</code> of the project and after a while there should be
a new confidential <code>Packit-Service Authentication</code> issue with instructions how to finish the setup.</p>
<h2 id="how-can-i-download-rpm-spec-file-if-it-is-not-part-of-upstream-repository">
  How can I download RPM spec file if it is not part of upstream repository?
  <a class="anchor" href="#how-can-i-download-rpm-spec-file-if-it-is-not-part-of-upstream-repository">#</a>
</h2>
<p>If you do not want to have the RPM spec file in your upstream repository,
you can download it in <a href="/docs/actions/">actions</a> section.</p>
<p>Add <a href="/docs/actions/">actions</a> section to your packit.yaml configuration file and
download the spec file in a hook <code>post_upstream_clone</code>.
Packit service has a limited set of commands available so please use <code>wget</code> or <code>curl</code>.</p>
<p>The configuration file with downloading the RPM spec file now looks like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">specfile_path</span>: <span style="color:#ae81ff">packit.spec</span>
<span style="color:#f92672">synced_files</span>:
  - <span style="color:#ae81ff">packit.spec</span>
  - <span style="color:#ae81ff">.packit.yaml</span>
<span style="color:#f92672">upstream_package_name</span>: <span style="color:#ae81ff">packitos</span>
<span style="color:#f92672">downstream_package_name</span>: <span style="color:#ae81ff">packit</span>
<span style="color:#f92672">actions</span>:
    <span style="color:#f92672">post-upstream-clone</span>: <span style="color:#e6db74">&#34;wget https://src.fedoraproject.org/rpms/packit/raw/main/f/packit.spec -O packit.spec&#34;</span>
</code></pre></div><h2 id="i-have-a-template-of-a-spec-file-in-my-repo-can-packit-work-with-it">
  I have a template of a spec file in my repo: can packit work with it?
  <a class="anchor" href="#i-have-a-template-of-a-spec-file-in-my-repo-can-packit-work-with-it">#</a>
</h2>
<p>Yes!</p>
<p>The solution is, again, actions and hooks. Just render the spec after the upstream repo is cloned:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">specfile_path</span>: <span style="color:#ae81ff">my-project.spec</span>
<span style="color:#f92672">upstream_package_name</span>: <span style="color:#ae81ff">my-project-src</span>
<span style="color:#f92672">downstream_package_name</span>: <span style="color:#ae81ff">my-project</span>
<span style="color:#f92672">actions</span>:
    <span style="color:#f92672">post-upstream-clone</span>: <span style="color:#e6db74">&#34;make generate-spec&#34;</span>
</code></pre></div><p>Where the &ldquo;generate-spec&rdquo; make target could look like this:</p>
<pre><code>generate-spec:
    sed -e 's/@@VERSION@@/$(VERSION)/g' my-project.spec.template &gt;my-project.spec
</code></pre>
<p>As a practical example, <a href="https://github.com/cockpit-project/cockpit-podman">cockpit-podman
project</a> is using this
functionality.</p>
<h2 id="can-i-use-centos-stream-with-packit-service">
  Can I use CentOS Stream with packit service?
  <a class="anchor" href="#can-i-use-centos-stream-with-packit-service">#</a>
</h2>
<p>Yes, you can! It&rsquo;s very simple, just add <code>centos-stream-8-x86_64</code> as a target for
the <code>copr_build</code> job:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">jobs</span>:
- <span style="color:#f92672">job</span>: <span style="color:#ae81ff">copr_build</span>
  <span style="color:#f92672">trigger</span>: <span style="color:#ae81ff">pull_request</span>
  <span style="color:#f92672">metadata</span>:
    <span style="color:#f92672">targets</span>:
      - <span style="color:#ae81ff">centos-stream-8-x86_64</span>
</code></pre></div><h2 id="after-adding-tests-i-see-error-no-fmf-metadata-found">
  After adding tests I see error &lsquo;No FMF metadata found.&rsquo;
  <a class="anchor" href="#after-adding-tests-i-see-error-no-fmf-metadata-found">#</a>
</h2>
<p>If you encounter this error when running tests via Testing Farm,
it means you forgot to initialize the metadata tree with <code>fmf init</code>
and include the <code>.fmf</code> directory in the pull request.
See <a href="/docs/testing-farm">Testing Farm documentation</a> for more information.</p>
Does packit work with <h2 id="does-packit-work-with-rpmautospechttpsdocspagureorgfedora-infrarpmautospec">
  <a href="https://docs.pagure.org/Fedora-Infra.rpmautospec/">rpmautospec</a>?
  <a class="anchor" href="#does-packit-work-with-rpmautospechttpsdocspagureorgfedora-infrarpmautospec">#</a>
</h2>
<p>Good that you ask. It does, packit works with rpmautospec quite nicely.</p>
<p>Before you start, please make sure that you follow <a href="https://docs.pagure.org/Fedora-Infra.rpmautospec/">latest documentation for rpmautospec</a>.</p>
<p>rpmautospec utilizes two RPM macros:</p>
<ol>
<li><code>autorel</code> — to populate <code>Release</code></li>
<li><code>autochangelog</code> — to figure out changelog</li>
</ol>
<p>If you want your upstream spec file to also work well when <code>rpmautospec-rpm-macros</code> is not installed, set <code>Release</code> to this:</p>
<pre><code>Release:  %{?autorel}%{!?autorel:1}
</code></pre>
<p>This construct uses <code>autorel</code> macro if it&rsquo;s defined, and if it&rsquo;s not, it sets release to 1.</p>
<p>For <code>%changelog</code>, you don&rsquo;t need to include the changelog file upstream and you can have it downstream only, which makes sense - changelog is specific to a release.</p>
<h2 id="how-do-i-install-dependencies-for-my-commands-in-packit-service">
  How do I install dependencies for my commands in packit-service?
  <a class="anchor" href="#how-do-i-install-dependencies-for-my-commands-in-packit-service">#</a>
</h2>
<p>We are running all commands, defined by you, in a sandbox which is locked-down.
At the moment we don&rsquo;t have any mechanism for you to define the dependencies
you need and us making them available for you.</p>
<p>In the mean time we are solving these requests one by one, so <a href="#how-can-i-contact-you">please reach out
to us</a>.</p>
<h2 id="a-command-failed-in-packit-service-how-do-i-reproduce-it-locally">
  A command failed in packit-service: how do I reproduce it locally?
  <a class="anchor" href="#a-command-failed-in-packit-service-how-do-i-reproduce-it-locally">#</a>
</h2>
<p>Packit service runs all commands you defined in a
<a href="https://github.com/packit/sandcastle">sandbox</a> which is a kubernetes pod in a
new project. If you need additional packages or binaries present in the
sandbox, please <a href="https://github.com/packit/sandcastle/issues/new">let us know</a>.</p>
<p>In the meantime, you can pull our production sandbox image and run the command
inside. As an example, this is how we were debugging build problems with
anaconda:</p>
<ol>
<li>
<p>Clone your upstream git repo.</p>
</li>
<li>
<p>Launch the container and bind-mount the upstream project inside:</p>
</li>
</ol>
<pre><code>$ docker run -ti --rm --memory 768MB -v $PWD:/src -w /src quay.io/packit/sandcastle:prod bash
</code></pre><ol start="4">
<li>Run commands of your choice:</li>
</ol>
<pre><code>[root@4af5dbd9c828 src]# ./configure
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /usr/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking whether UID '0' is supported by ustar format... yes
checking whether GID '0' is supported by ustar format... yes
checking how to create a ustar tar archive... gnutar
checking whether make supports nested variables... (cached) yes
checking whether make supports the include directive... yes (GNU style)
checking for gcc... gcc
checking whether the C compiler works... yes
...
</code></pre><p>Our deployment is running in <a href="https://www.openshift.com/products/online/">OpenShift
Online</a> which is using docker as a
container engine, that&rsquo;s why we are using docker here and not
<a href="https://github.com/containers/podman">podman</a>.</p>
<p>Since OpenShift <a href="https://www.openshift.com/blog/a-guide-to-openshift-and-uids">invokes pods using arbitrary
UIDs</a> and as you
can see, the command above is invoked as root, it does not match production
packit-service.  So, if running a local container didn&rsquo;t help you with
reproducing the issue, you can try running it in openshift!</p>
<p>Here is a simple python code how packit-service does it:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> sandcastle <span style="color:#f92672">import</span> Sandcastle

<span style="color:#75715e"># this should be the path to your local clone of the upstream project</span>
git_repo_path: str <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;fill-me&#34;</span>
<span style="color:#75715e"># kubernetes namespace to use</span>
k8s_namespace: str <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;myproject&#34;</span>
command <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;your&#34;</span>, <span style="color:#e6db74">&#34;command&#34;</span>, <span style="color:#e6db74">&#34;of&#34;</span>, <span style="color:#e6db74">&#34;choice&#34;</span>]

<span style="color:#75715e"># This is how your code gets copied (via rsync) into the openshift pod</span>
m_dir <span style="color:#f92672">=</span> MappedDir(git_repo_path, <span style="color:#e6db74">&#34;/sandcastle&#34;</span>, with_interim_pvc<span style="color:#f92672">=</span>True)

o <span style="color:#f92672">=</span> Sandcastle(
    image_reference<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;docker.io/usercont/sandcastle:prod&#34;</span>,
    k8s_namespace_name<span style="color:#f92672">=</span>k8s_namespace,
    mapped_dir<span style="color:#f92672">=</span>m_dir
)
o<span style="color:#f92672">.</span>run()
<span style="color:#66d9ef">try</span>:
    output <span style="color:#f92672">=</span> o<span style="color:#f92672">.</span><span style="color:#66d9ef">exec</span>(command<span style="color:#f92672">=</span>command)
    <span style="color:#66d9ef">print</span>(output)
<span style="color:#66d9ef">finally</span>:
    o<span style="color:#f92672">.</span>delete_pod()
</code></pre></div><p>This script requires:</p>
<ul>
<li><a href="https://github.com/packit/sandcastle">sandcastle</a> installed</li>
<li>being logged in an openshift cluster (<code>oc whoami</code> to confirm)</li>
<li>rsync binary available</li>
</ul>
<p>If none of these helped you, please <a href="#how-can-i-contact-you">reach out</a> to us and we&rsquo;ll try to help you.</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#can-i-use-the-packit-service-as-soon-as-i-install-it-into-my-repository">Can I use the packit service as soon as I install it into my repository?</a></li>
    <li><a href="#can-i-use-packit-service-for-any-github-repository">Can I use packit service for any GitHub repository?</a></li>
    <li><a href="#how-can-i-contact-you">How can I contact you?</a></li>
    <li><a href="#why-do-i-have-to-maintain-packityaml-and-a-spec-file-upstream">Why do I have to maintain .packit.yaml and a spec file upstream?</a></li>
    <li><a href="#but-what-are-the-benefits">But what are the benefits?</a></li>
    <li><a href="#why-fedora">Why Fedora?</a></li>
    <li><a href="#how-is-packit-different-from-other-services">How is Packit different from other services?</a></li>
    <li><a href="#can-we-use-packit-with-gitlab">Can we use Packit with Gitlab?</a></li>
    <li><a href="#how-can-i-download-rpm-spec-file-if-it-is-not-part-of-upstream-repository">How can I download RPM spec file if it is not part of upstream repository?</a></li>
    <li><a href="#i-have-a-template-of-a-spec-file-in-my-repo-can-packit-work-with-it">I have a template of a spec file in my repo: can packit work with it?</a></li>
    <li><a href="#can-i-use-centos-stream-with-packit-service">Can I use CentOS Stream with packit service?</a></li>
    <li><a href="#after-adding-tests-i-see-error-no-fmf-metadata-found">After adding tests I see error &lsquo;No FMF metadata found.&rsquo;</a></li>
    <li><a href="#does-packit-work-with-rpmautospechttpsdocspagureorgfedora-infrarpmautospec">Does packit work with <a href="https://docs.pagure.org/Fedora-Infra.rpmautospec/">rpmautospec</a>?</a></li>
    <li><a href="#how-do-i-install-dependencies-for-my-commands-in-packit-service">How do I install dependencies for my commands in packit-service?</a></li>
    <li><a href="#a-command-failed-in-packit-service-how-do-i-reproduce-it-locally">A command failed in packit-service: how do I reproduce it locally?</a></li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>

</html>












